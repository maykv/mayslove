document.addEventListener("DOMContentLoaded", function() {
    const tracklistItems = document.querySelectorAll('#tracklist li');
    const youtubeEmbed = document.getElementById('youtube-embed');
    const officialDescriptionText = document.getElementById('official-description').querySelector('p');
    const personalReview = document.getElementById('personal-review');
    const personalReviewText = document.getElementById('personal-review-text');
    const showOfficialBtn = document.getElementById('show-official');
    const showPersonalBtn = document.getElementById('show-personal');

    const officialDescriptions = [
        "10년간 열렬히 사랑하다가<br>봄이 지르는 탄성 속에<br>기쁘게 이별하는 한 연인의 이야기. //<br><br>정규앨범의 포문을 여는 동명의 타이틀곡 ‘라일락'은 화사하고 경쾌한 사운드가 봄의 설렘을 선사한다. 리드미컬한 베이스 라인을 시작으로 펑키한 리듬과 팝적인 요소들이 조화를 이뤄 만들어낸 70-80년대 디스코 사운드가 청자에게 즐거움을 준다. 작곡에는 임수호, Dr.JO, 웅킴, N!ko 가 참여했다.",
        "‘사랑'이라는 소재로 가사를 쓸 때 내가 대표적으로 앞세우는 감각은 ‘고통'이다. 불편하게시리 계속 신경 쓰이던 이 감정이 사랑이라는 것을 비로소 자각하게 됐을 때, 나는 내 몸속을 구성하는 모든 것들이 뒤죽박죽 재배열 되는 듯한 느낌을 받는다. 그리고 그 기분은 가히 상쾌하지만은 않다.<br>바락바락 부정하더라도 결국 얼마 못 가 나를 완전히 무력화시키고 말, 사랑이라는 세균에 맞서 사력을 다해 마지막 반항을 하는 이야기를 담았다. //<br><br>히트 작곡가 라이언 전, 그리고 다양한 음악 작업에 참여한 그의 작곡팀이 함께 한 ‘Flu'는 미니멀한 어반 비트에서 펼쳐지는 중독적인 훅과 몽환적인 느낌의 멜로디가 곡에 생동감을 불어넣는다. 위트 넘치는 아이유 특유의 디테일한 가사와 위태로운 보이스는 곡의 매력을 극대화한다.",
        "자극적인 것들은 대체할 수 없이 매력적이지만 결국 건강에 해롭다.<br>내 건강에 해로운 게임은 딱 요번 한 판만 더 할게요. //<br><br>게임장을 연상시키는 샘플 사운드를 시작으로 Poptime의 펑키한 그루브 밴드 사운드 트랙과 아이유의 멜로디 라인이 만나 기존에 시도하지 않았던 새로운 장르를 만들었다. 특히 음원을 통해서는 최초로 선보이는 아이유의 화려한 랩핑부터 색다른 드롭 파트까지 데뷔 이래 처음 시도하는 컨셉의 곡으로, 티저 영상 공개 이후부터 큰 화제를 모았다.",
        "아직도 무의식 중에 가장 먼저 떠올리는 이름이 너일 때가 있지만,<br>이렇게 잠 못 이루는 밤들도 더러 있지만,<br>이제는 이게 미련이라고 생각되지는 않아<br>그냥 힘든 날 생각나는 이름이지<br>다시 한번 만나고픈 우연이지<br><br>이른 새벽 작은 기척에 혹시나 싶어 나가 보는 마음<br>살랑 지나가는 바람에 혹시나 싶어 손 뻗어보는 마음<br>물끄러미 마주친 고양이의 눈에 혹시 너인가 싶어 이름 불러 보는 마음<br><br>나비가 됐구나<br>여전히 예쁘네<br><br>새가 됐구나<br>드디어 자유롭네<br><br>오늘도 잊지 않고 이렇게 왔구나<br>고마워<br><br>내일도 기다릴 수 있어 다행이야<br>좋은 날 또 만나자. //<br><br>대한민국을 대표하는 싱어송라이터 나얼이 아이유에게 선물한 곡으로 담백하면서도 절제된 멜로디가 EP와 나일론 기타의 선율을 따라 조심스럽게 감정선을 이끌어간다. 독백하듯 호흡을 던지는 멜로디컬한 후렴구와 나얼의 담담한 코러스는 곡의 깊이를 한층 더 끌어올리며, 잔잔하게 여운을 남기는 브릿지, 그리고 다이렉트로 키업된 마지막 후렴구가 솔직하면서도 세련된 느낌을 더해준다. 봄이 온 듯한 서정적인 스트링 선율에 따뜻한 일렉 기타 사운드가 함께 더해져 전형적이면서도 감성적인 컨템포러리 팝 사운드를 완성한다.",
        "아이유(IU) 정규 5집 선공개 〈Celebrity〉<br><br>시선을 끄는 차림과 조금 독특한 취향, 다양한 재능, 낯가림에서 비롯된 방어기제, 매사에 호오가 분명한 성격 등으로 인해 종종 별난 사람 취급을 받아온 친구가 있다.<br>그 친구의 그런 특징들 때문에 나는 더욱 그 애를 사랑하는데, 본인은 같은 이유로 그동안 미움의 눈초리를 더 많이 받으며 살아왔다고 했다.<br>나의 ‘별난 친구’에게 해주고 싶은 말들을 적으며 시작했던 가삿말이었지만 작업을 하다 보니 점점 이건 나의 얘기이기도 하다는 걸 깨달았다. 가사를 완성하고 나니 내 친구나 나뿐만이 아니라 그 누구를 주인공에 대입시켜도 전혀 부자연스럽지 않다는 생각이 들었다. 누구나 살면서 한 번쯤은 내가 남들이 만들어 놓은 기준에 맞지 않는 사람이라는 이유로 소외감을 느껴본 적이 있을 테니까.<br>내 친구를 포함해 투박하고도 유일하게 태어난 이들에게 말하고 싶다.<br>당신은 별난 사람이 아니라 별 같은 사람이라고.",
        "한심하지만<br>여기까지도 사랑이라면 사랑. //<br><br>많은 이들이 기다렸던 아이유와 DEAN의 만남이 성사되었다. 작곡에는 박우상, JUNNY (주니), DEAN, jane이 참여했으며 레게와 보사노바를 기반한 장르로 아이유와 DEAN이 마치 돌림노래 같은 연인 사이의 관계에 대해 솔직한 이야기를 주고받는다.",
        "먼저 자리에서 일어나는 여자를 차마 붙잡지 못하고 그 자리에 창백하게 앉아 있던 남자의 컵에는 넘칠 듯 가득 차 있던 향기로운 커피 대신, 바닥에 눌어붙은 커피 자국만이 지저분하게 남아 있었다. //<br><br>프로듀서 우기(WOOGIE), 힙합 뮤지션 페노메코(PENOMECO), 그리고 아이유. 음악적 스펙트럼이 넓은 아티스트들의 신선한 협업 소식에 트랙 리스트 공개부터 화제가 된 바 있는 ‘빈 컵(Empty Cup)'은 톤 다운된 아이유의 쓸쓸한 보이스에 로우파이한 기타 사운드, 알앤비 기반의 밴드 사운드가 합쳐져 곡의 시크한 감정선을 극대화 시킨다.",
        "내가 나를 온전히 사랑하지 못해<br>마음이 가난했던 밤들을 지나,<br>이제야 겨우 되찾은 나의 바다. //<br><br>‘밤편지'의 콤비, 작곡가 제휘와 김희원이 다시 발라드 트랙으로 뭉쳤다. 잔잔하게 시작되지만 이내 등장하는 웅장한 사운드와 아이유의 에너지 넘치는 보컬이 어우러지며 5분 16초 동안 듣는 이들의 귀를 사로잡는다. 또한 20인조 스트링 세션의 풍부한 연주는 곡의 아름다움을 더했고, 후반부에 아이유의 폭발적인 고음과 작곡가 제휘의 친구들이 함께하는 콰이어는 드라마틱한 클라이맥스를 이끌어낸다.",
        "그 바다에서 지겹게 보자고. //<br><br>파도 위 서핑처럼 시원하고 어택감있는 사운드, 마치 사진을 찍는 듯 뚝 뚝 끊기는 리듬과 다이나믹한 멜로디는 아이유와 이찬혁이 함께 써 내려간 재미난 가사를 더 돋보이게 만든다. 또한 이찬혁은 '아이유의 상큼한 초기 노래들의 현대 해석 버전이라 하면 어울리겠다'라는 코멘트를 전해 추가적으로 다양한 감상 포인트를 부여해 준다.",
        "수다스러웠던 저의 20대 내내, 제 말들을 귀찮아하지 않고 기꺼이 함께 이야기 나눠 주신 모든 청자분들께 진심으로 고맙습니다.<br>스물세 살의 아이유도, 스물다섯의 아이유도, 작년의 아이유도 아닌 지금의 저는 이제 아무 의문 없이 이 다음으로 갑니다.<br>안녕♥<br><br>- 지은 드림 //<br><br>아이유의 이십 대 첫 앨범 <스무 살의 봄> 마지막 트랙을 맡았던 작곡가 심은지가 이번 이십 대를 마무리하는 앨범에 싱어송라이터 김수영, SUMIN (수민), 임금비와 뭉쳐 다시 한번 마지막 트랙을 장식한다. 아이유가 전하는 후련한 인사말과 마치 오래된 전축에서 흘러나올 법한 로우파이한 질감의 사운드에 레트로한 감성이 더해져 묘한 분위기를 자아내는 발라드곡이다."
    ];

    const personalReviews = [
        "아이유가 이 앨범을 내기 정확히 10년 전에 '좋은 이별이란 거 결국 세상엔 없는 일이라는 걸'이라고 노래했다. 그러나 19살의 이지은이 29살의 이지은이 되자 아이유는 탄성을 내지른다. '아 이 얼마나 기쁜 일이야'. 이제 아이유는 비로소 깨달은거다. 본인에게도 꽃잎 같은 작별이 있다는 걸.",
        "감기같은 사랑... 사랑이라는 게 언제나 기쁜 것은 아니다. 가끔 바이러스처럼 내 속을 망쳐놓는다. 그리고 또 다시 바보같이 사랑에 빠진다.",
        "자극적인 거... 그것만큼 인생을 즐길만한 것이 없다. 그래서 더군다나 더 못 끊는다. 그런 감정이 이 곡에 더 잘 녹아 있다.",
        "<strong>'봄... 그대가 내게 봄이 되어 왔나봐'</strong><br>아이유는 이제 새로운 이별을 노래한다. 이별이라는 건 원래 단념했다는 걸 알면서도 스스로 놓지 못하는, 언젠가 마주치고 싶은 그런 마음일 때도 있다.",
        "별난 사람이 아니라 별 같은 사람이라는 표현을 통해서 아이유가 별난 사람에 대해서도 소중히 여기고 있었음을 시사해주는 것 같아 감동스러웠다.",
        "아니... 아이유 말고도 DEAN 발성이 와... 그냥... 와.... 감탄만 나오는... 말이 안나오는 그런... 와... 그냥 대박.",
        "날 미치게 하는 두 눈을 더 이상 사랑하고 싶지 않다는 표현은... 누군가를 한 때는 담았지만 이제는 그렇지 아니한 빈 컵과도 같다.",
        "아이유의 지난 20대를 돌아보며, 나와 많이 비슷하다는 느낌을 받았다. 아이유의 그동안의 상처와 앞으로 나아갈 태도와 자세가 모두 한번에 드러나는 곡이었다. '거울 속에 비친 내 모습이 어색해서 습관처럼 조용히 눈을 감았던 20대 초', '숱하게 의심하던 나는 그제야 나에게 대답할 수 있을 것 같게'된 20대 중반, 이제 두번 다시 나를 모른 척하지 않는다는 다짐을 한 20대 후반까지. 아이유가 지난 10년동안 겪었던 모든 변화가 드러나있다.",
        "어어어 푸푸푸 또 허허허 우우우적 거거거 리더는 시저저절 나라면 워어우우이사람아 뭘 그렇게나 보채자 어어어 푸푸푸 또 허허허 우우우적 거거거 리더는 시저저절 어어어 푸푸푸 또 허허허 우우우적 거거거 리더는 시저저절",
        "아이유의 팬송 중 가장 감동적인 노래. 아이유가 팬들에게 어떤 생각을 가지고 있는지 자세히 보여준다."
    ];

    const albumCover = document.getElementById('album-cover');

    // 앨범 커버 클릭 시 팝업 생성
    albumCover.addEventListener('click', function() {
        const popup = document.createElement('div');
        popup.className = 'popup';
        popup.innerHTML = `<span class="close">&times;</span><img src="${this.src}" alt="앨범 커버" class="popup-image">`;
        
        // 팝업 배경 클릭 시 닫기
        popup.addEventListener('click', function(e) {
            if (e.target === popup) {
                document.body.removeChild(popup);
            }
        });

        document.body.appendChild(popup);

        // 팝업 닫기 버튼 클릭 시 닫기
        const closeButton = popup.querySelector('.close');
        closeButton.addEventListener('click', function() {
            document.body.removeChild(popup);
        });
    });

    tracklistItems.forEach((item, index) => {
        item.addEventListener('click', function() {
            const youtubeUrl = this.getAttribute('data-youtube');
            youtubeEmbed.src = youtubeUrl; // 유튜브 링크 설정
            officialDescriptionText.innerHTML = officialDescriptions[index]; // HTML로 설정
            personalReviewText.innerHTML = personalReviews[index]; // HTML로 설정
        });
    });

    showOfficialBtn.addEventListener('click', function() {
        officialDescription.style.display = 'block'; // 공식 설명 표시
        personalReview.style.display = 'none'; // 주인장 평론 숨김
    });

    showPersonalBtn.addEventListener('click', function() {
        personalReview.style.display = 'block'; // 주인장 평론 표시
        officialDescription.style.display = 'none'; // 공식 설명 숨김
    });
});
